version: "3.9"

services:
  background-lab:
    image: remove-background
    container_name: remove-background
    build: ./app

    env_file:
      - .env

    volumes:
      - ./data:/data
      - ./app/images:/app/images
      - ./app/images_alpha:/app/images_alpha
      - ./output:/app/output
      - ./app/models/sam_vit_b_01ec64.pth:/sam_vit_b_01ec64.pth
      - ./app/results:/app/results

    deploy:
      resources:
        limits:
          cpus: "4"
          memory: 8G
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
